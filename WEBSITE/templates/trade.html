{% extends "base.html" %}
{% block title %}Trade {{ stock.ticker }}{% endblock %}
{% block content %}
<div class="container mt-5">
    <h2>{{ stock.name }} ({{ stock.ticker }})</h2>
    <div class="card p-3">
        <p>Current Price: ${{ "%.2f"|format(stock.currentMarketPrice) }}</p>
        <p>Available: {{ stock.quantity }}</p>
        <form method="POST">
            <div class="mb-2">
                <label>Action</label>
                <select name="action" class="form-control">
                    <option>BUY</option>
                    <option>SELL</option>
                </select>
            </div>
            <div class="mb-2">
                <label>Quantity</label>
                <input type="number" name="quantity" class="form-control" min="1" required>
            </div>
            <div class="mb-2">
                <button class="btn btn-primary" type="submit">Place Order</button>
                <a href="{{ url_for('market') }}" class="btn btn-secondary">Back</a>
            </div>
        </form>
    </div>
    {% if owned_qty %}
    <div class="mt-3">
        <p>Your holdings: {{ owned_qty }} shares</p>
        {% if avg_price %}
        <p>Average purchase price: ${{ avg_price }}</p>
        {% endif %}
    </div>
    {% endif %}
</div>
{% endblock %}
